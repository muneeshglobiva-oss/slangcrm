(()=>{var e={};e.id=888,e.ids=[888],e.modules={1103:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>x});var r=s(997),i=s(6689);s(6764);var t=s(9816),n=s.n(t),o=s(1664),l=s.n(o);function d({user:e,logout:a}){let[s,t]=(0,i.useState)(!0);return(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{className:"sidebar-toggle",onClick:()=>t(e=>!e),"aria-label":s?"Close menu":"Open menu",style:{position:"fixed",left:s?230:0,top:20,zIndex:200,background:"#0070f3",color:"#fff",border:"none",borderRadius:"0 6px 6px 0",padding:"0.5rem 0.7rem",cursor:"pointer",transition:"left 0.2s"},children:s?"⏴":"⏵"}),(0,r.jsxs)("aside",{style:{width:s?230:0,minWidth:s?230:0,overflow:"hidden",transition:"width 0.2s, min-width 0.2s"},className:"jsx-8f9aaac6593da024 sidebar",children:[r.jsx("div",{style:{display:s?"block":"none"},className:"jsx-8f9aaac6593da024 sidebar-logo",children:r.jsx("img",{src:"/logo.png",alt:"Logo",style:{width:180,height:64,objectFit:"contain"},className:"jsx-8f9aaac6593da024"})}),(0,r.jsxs)("nav",{style:{display:s?"flex":"none"},className:"jsx-8f9aaac6593da024 sidebar-menu",children:[r.jsx(l(),{href:"/",children:(0,r.jsxs)("span",{className:"jsx-8f9aaac6593da024",children:[r.jsx("span",{className:"jsx-8f9aaac6593da024 icon",children:"\uD83C\uDFE0"})," Dashboard"]})}),r.jsx(l(),{href:"/search",children:(0,r.jsxs)("span",{className:"jsx-8f9aaac6593da024",children:[r.jsx("span",{className:"jsx-8f9aaac6593da024 icon",children:"\uD83D\uDD0D"})," Search"]})}),r.jsx(l(),{href:"/profile",children:(0,r.jsxs)("span",{className:"jsx-8f9aaac6593da024",children:[r.jsx("span",{className:"jsx-8f9aaac6593da024 icon",children:"\uD83D\uDC64"})," Profile"]})}),e&&"admin"===e.role&&(0,r.jsxs)(r.Fragment,{children:[r.jsx(l(),{href:"/parts",children:(0,r.jsxs)("span",{className:"jsx-8f9aaac6593da024",children:[r.jsx("span",{className:"jsx-8f9aaac6593da024 icon",children:"➕"})," Add Product"]})}),r.jsx(l(),{href:"/upload-csv",children:(0,r.jsxs)("span",{className:"jsx-8f9aaac6593da024",children:[r.jsx("span",{className:"jsx-8f9aaac6593da024 icon",children:"⬆️"})," Upload Data"]})}),r.jsx(l(),{href:"/users",children:(0,r.jsxs)("span",{className:"jsx-8f9aaac6593da024",children:[r.jsx("span",{className:"jsx-8f9aaac6593da024 icon",children:"\uD83D\uDC65"})," Manage Users"]})})]})]}),e&&(0,r.jsxs)("div",{style:{display:s?"block":"none",position:"absolute",bottom:"1rem",left:"1rem",right:"1rem"},className:"jsx-8f9aaac6593da024 sidebar-user",children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"0.5rem"},className:"jsx-8f9aaac6593da024 user-info",children:[r.jsx("div",{style:{width:"32px",height:"32px",background:"#ccc",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"0.5rem"},className:"jsx-8f9aaac6593da024 user-avatar",children:e.name?e.name.charAt(0).toUpperCase():"U"}),r.jsx("span",{className:"jsx-8f9aaac6593da024",children:e.name})]}),r.jsx("button",{onClick:a,style:{width:"100%",padding:"0.5rem",background:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},className:"jsx-8f9aaac6593da024",children:"Logout"})]}),r.jsx(n(),{id:"8f9aaac6593da024",children:".sidebar.jsx-8f9aaac6593da024{background:-webkit-linear-gradient(top,#f8fafc 0%,#e9f0f7 100%);background:-moz-linear-gradient(top,#f8fafc 0%,#e9f0f7 100%);background:-o-linear-gradient(top,#f8fafc 0%,#e9f0f7 100%);background:linear-gradient(180deg,#f8fafc 0%,#e9f0f7 100%);min-height:100vh;-webkit-box-shadow:2px 0 12px#0001;-moz-box-shadow:2px 0 12px#0001;box-shadow:2px 0 12px#0001;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-top:2rem;position:fixed;left:0;top:0;z-index:100}.sidebar-logo.jsx-8f9aaac6593da024{margin-bottom:2.5rem}.sidebar-menu.jsx-8f9aaac6593da024{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:1.2rem;width:100%}.sidebar-menu.jsx-8f9aaac6593da024 a.jsx-8f9aaac6593da024{color:#222;text-decoration:none;font-size:1.13rem;padding:.85rem 2.2rem;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-transition:background.15s,color.15s;-moz-transition:background.15s,color.15s;-o-transition:background.15s,color.15s;transition:background.15s,color.15s;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.sidebar-menu.jsx-8f9aaac6593da024 a.jsx-8f9aaac6593da024:hover,.sidebar-menu.jsx-8f9aaac6593da024 a.active.jsx-8f9aaac6593da024{background:#e3eefd;color:#0070f3}.icon.jsx-8f9aaac6593da024{margin-right:.7em;font-size:1.2em}"})]})]})}var c=s(48);function x({Component:e,pageProps:a}){let[s,t]=(0,i.useState)(!1),[n,o]=(0,i.useState)(null);return((0,i.useEffect)(()=>{let e=localStorage.getItem("token"),a=localStorage.getItem("user");e&&a&&(t(!0),o(JSON.parse(a)))},[]),s)?(0,r.jsxs)("div",{style:{display:"flex"},children:[r.jsx(d,{user:n,onLogout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t(!1),o(null),window.location.href="/login"}}),r.jsx("div",{style:{marginLeft:220,width:"100%"},children:r.jsx(e,{...a,user:n})})]}):r.jsx(c.default,{onLogin:e=>{t(!0),o(e)}})}},48:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>n});var r=s(997),i=s(6689),t=s(1163);function n({onLogin:e}){let[a,s]=(0,i.useState)(""),[n,o]=(0,i.useState)(""),[l,d]=(0,i.useState)("");(0,t.useRouter)();let c=async s=>{s.preventDefault();try{let s=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:n})}),r=await s.json();s.ok?(localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),e(r.user)):d(r.error)}catch(e){d("Login failed")}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[r.jsx("div",{children:r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"})}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:c,children:[l&&r.jsx("div",{className:"text-red-500 text-center",children:l}),(0,r.jsxs)("div",{children:[r.jsx("input",{type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:a,onChange:e=>s(e.target.value)}),r.jsx("input",{type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:e=>o(e.target.value)})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign in"})})]})]})})}},6764:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9816:e=>{"use strict";e.exports=require("styled-jsx/style")},7147:e=>{"use strict";e.exports=require("fs")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var a=require("../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[491,424],()=>s(1103));module.exports=r})();