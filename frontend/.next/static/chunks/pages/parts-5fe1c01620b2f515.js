(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{9654:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/parts",function(){return s(2637)}])},2637:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return n}});var t=s(5893),r=s(7294),l=s(5121);function n(){let[e,a]=(0,r.useState)([]),[s,n]=(0,r.useState)(0),[i,d]=(0,r.useState)(1),[c,o]=(0,r.useState)(1),[m,u]=(0,r.useState)(""),[p,x]=(0,r.useState)(null),[h,b]=(0,r.useState)({model_number:"",article_number:"",article_name:"",part_name:"",part_pseudo_name:"",part_description:"",part_weight:"",part_size:"",image:null}),[g,j]=(0,r.useState)(0),[f,N]=(0,r.useState)(null);function _(e){let{name:a,value:s,files:t}=e.target;b(e=>({...e,[a]:t?t[0]:s}))}function y(){x(null),b({model_number:"",article_number:"",article_name:"",part_name:"",part_pseudo_name:"",part_description:"",part_weight:"",part_size:"",image:null})}async function v(e){e.preventDefault();let a=new FormData;Object.entries(h).forEach(e=>{let[s,t]=e;null!=t&&a.append(s,t)}),p?await l.Z.put("/api/parts/".concat(p),a):await l.Z.post("/api/parts",a),j(e=>e+1),y()}async function w(e){confirm("Delete this part?")&&(await l.Z.delete("/api/parts/".concat(e)),j(e=>e+1))}return(0,r.useEffect)(()=>{let e={page:i,limit:10};m&&(e.q=m),l.Z.get("/api/parts",{params:e}).then(e=>{a(e.data.parts||[]),n(e.data.total||0),o(e.data.totalPages||1)}).catch(e=>{console.error("Error fetching parts:",e),a([]),n(0),o(1)})},[i,m,g]),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Add / Edit Product Part"}),(0,t.jsxs)("form",{className:"bg-white rounded-lg shadow-md p-6 mb-8",onSubmit:v,children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"model_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Model Number"}),(0,t.jsx)("input",{id:"model_number",name:"model_number",value:h.model_number,onChange:_,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"article_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Article Number"}),(0,t.jsx)("input",{id:"article_number",name:"article_number",value:h.article_number,onChange:_,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"article_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Article Name"}),(0,t.jsx)("input",{id:"article_name",name:"article_name",value:h.article_name,onChange:_,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"part_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Number"}),(0,t.jsx)("input",{id:"part_name",name:"part_name",value:h.part_name,onChange:_,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{htmlFor:"part_pseudo_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Pseudo Name"}),(0,t.jsx)("textarea",{id:"part_pseudo_name",name:"part_pseudo_name",value:h.part_pseudo_name,onChange:_,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"part_weight",className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Weight"}),(0,t.jsx)("input",{id:"part_weight",name:"part_weight",value:h.part_weight,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"part_size",className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Size"}),(0,t.jsx)("input",{id:"part_size",name:"part_size",value:h.part_size,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"part_description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Part Description"}),(0,t.jsx)("textarea",{id:"part_description",name:"part_description",value:h.part_description,onChange:_,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700 mb-2",children:"Image"}),(0,t.jsx)("input",{type:"file",id:"image",name:"image",accept:"image/*",onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 font-semibold",children:[p?"Update":"Add"," Part"]}),p&&(0,t.jsx)("button",{type:"button",onClick:y,className:"px-6 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 font-semibold",children:"Cancel"})]})]}),(0,t.jsxs)("div",{className:"part-list",children:[(0,t.jsx)("h2",{children:"All Parts"}),(0,t.jsxs)("div",{className:"search-paging",children:[(0,t.jsx)("div",{className:"search-bar",children:(0,t.jsx)("input",{type:"text",placeholder:"Search parts...",value:m,onChange:e=>{u(e.target.value),d(1)},style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #ccc",width:"300px"}})}),(0,t.jsxs)("div",{className:"paging",children:[(0,t.jsx)("button",{onClick:()=>d(e=>Math.max(1,e-1)),disabled:1===i,children:"Previous"}),(0,t.jsxs)("span",{children:["Page ",i," of ",c," (",s," total)"]}),(0,t.jsx)("button",{onClick:()=>d(e=>Math.min(c,e+1)),disabled:i===c,children:"Next"})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full bg-white border border-gray-300 rounded shadow",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-100",children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Model #"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Article #"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Article Name"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Part Number"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Pseudo Name"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Weight"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Size"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Image"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Description"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-50",onClick:()=>N(e),children:[(0,t.jsx)("td",{className:"px-4 py-2 text-blue-600 underline",children:e.model_number}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.article_number}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.article_name}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.part_name}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.part_pseudo_name}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.part_weight}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.part_size}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.image&&(0,t.jsx)("img",{src:"/uploads/".concat(e.image),alt:"part",className:"w-10 h-10 object-cover rounded"})}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.part_description}),(0,t.jsxs)("td",{className:"px-4 py-2",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>{x(e.id),b({...e,image:null})},className:"mr-2 px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>w(e.id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]},e.id))})]})}),f&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>N(null),children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:f.model_number}),f.image&&(0,t.jsx)("img",{src:"/uploads/".concat(f.image),alt:"part",className:"w-48 h-48 object-contain mb-4 mx-auto"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Model Number:"})," ",f.model_number]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Article Number:"})," ",f.article_number]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Article Name:"})," ",f.article_name]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Part Weight:"})," ",f.part_weight]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Part Size:"})," ",f.part_size]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Part Description:"})," ",f.part_description]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Part Number:"})," ",f.part_name]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Part Pseudo Name:"})," ",f.part_pseudo_name]})]})]}),(0,t.jsx)("button",{onClick:()=>N(null),className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 font-semibold",children:"Close"})]})})]})]})}}},function(e){e.O(0,[121,774,888,179],function(){return e(e.s=9654)}),_N_E=e.O()}]);